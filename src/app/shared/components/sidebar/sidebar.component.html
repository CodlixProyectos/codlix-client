<!-- Overlay para cerrar sidebar en mobile -->
<div
  *ngIf="isExpanded"
  class="fixed inset-0 bg-black/40 z-[998] lg:hidden"
  (click)="closeMobileSidebar()">
</div>

<!-- Sidebar responsivo -->
<aside
  [ngClass]="{
    'w-72': isExpanded,
    'w-20': !isExpanded && !isMobile,
    '-translate-x-full': isMobile && !isExpanded,
    'translate-x-0': !isMobile || isExpanded
  }"
  class="fixed top-0 left-0 h-screen z-[999] bg-white shadow-lg transition-all duration-300 ease-in-out">

  <div class="h-full flex flex-col">
    <!-- Header con Logo y Botón Cerrar (mobile) -->
    <div class="flex items-center justify-between py-3 px-2 flex-shrink-0"
      [ngClass]="isExpanded ? 'px-4' : 'justify-center'">

      <div class="flex items-center gap-3 cursor-pointer" (click)="expandSidebar()">
        <div
          class="w-10 h-10 bg-gradient-to-br from-blue-900 to-blue-800 rounded-lg flex items-center justify-center text-white font-bold text-lg shadow-md flex-shrink-0">
          C
        </div>
        <span class="text-xl font-bold text-slate-900 whitespace-nowrap transition-all duration-300"
          [ngClass]="isExpanded ? 'opacity-100' : 'opacity-0 w-0 overflow-hidden'">
          CODLIX
        </span>
      </div>

      <!-- Botón cerrar (solo visible en mobile cuando está expandido) -->
      <button
        *ngIf="isExpanded"
        (click)="closeMobileSidebar()"
        class="lg:hidden p-2 hover:bg-gray-100 rounded-lg transition-colors">
        <svg class="w-6 h-6 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
        </svg>
      </button>
    </div>

    <!-- Navegación -->
    <nav class="space-y-2 px-4 mb-6 mt-4" [ngClass]="isExpanded ? 'block' : 'hidden'">
      <a routerLink="/"
         routerLinkActive="bg-blue-50 text-blue-900"
         [routerLinkActiveOptions]="{ exact: true }"
         (click)="onLinkClick()"
         class="flex items-center px-4 py-3 text-gray-600 hover:text-blue-900 hover:bg-blue-50 rounded-lg transition-all">
        <span class="font-medium text-sm">Inicio</span>
      </a>

      <a routerLink="/services"
         routerLinkActive="bg-blue-50 text-blue-900"
         (click)="onLinkClick()"
         class="flex items-center px-4 py-3 text-gray-600 hover:text-blue-900 hover:bg-blue-50 rounded-lg transition-all">
        <span class="font-medium text-sm">Servicios</span>
      </a>

      <a routerLink="/portfolio"
         routerLinkActive="bg-blue-50 text-blue-900"
         (click)="onLinkClick()"
         class="flex items-center px-4 py-3 text-gray-600 hover:text-blue-900 hover:bg-blue-50 rounded-lg transition-all">
        <span class="font-medium text-sm">Portafolio</span>
      </a>

      <a routerLink="/about"
         routerLinkActive="bg-blue-50 text-blue-900"
         (click)="onLinkClick()"
         class="flex items-center px-4 py-3 text-gray-600 hover:text-blue-900 hover:bg-blue-50 rounded-lg transition-all">
        <span class="font-medium text-sm">Nosotros</span>
      </a>

      <a routerLink="/contact"
         routerLinkActive="bg-blue-50 text-blue-900"
         (click)="onLinkClick()"
         class="flex items-center px-4 py-3 text-gray-600 hover:text-blue-900 hover:bg-blue-50 rounded-lg transition-all">
        <span class="font-medium text-sm">Contacto</span>
      </a>
    </nav>

    <!-- CTA Button expandido -->
    <div class="px-4 mb-6" [ngClass]="isExpanded ? 'block' : 'hidden'">
      <a routerLink="/contact"
         (click)="onLinkClick()"
         class="flex items-center justify-center w-full bg-gradient-to-r from-blue-900 to-blue-800 hover:from-blue-800 hover:to-blue-700 text-white px-4 py-3 rounded-lg font-semibold shadow-md hover:shadow-lg transition-all">
        <span class="text-sm">Iniciar Proyecto</span>
      </a>
    </div>

    <!-- Nombre CODLIX vertical centrado cuando está colapsado -->
    <div class="flex-1 flex items-center justify-center cursor-pointer"
         [ngClass]="isExpanded ? 'hidden' : 'flex'"
         (click)="expandSidebar()">
      <span class="text-lg font-extrabold text-slate-800 tracking-widest uppercase"
        style="writing-mode: vertical-rl; transform: rotate(180deg); letter-spacing: 0.2em;">
        CODLIX
      </span>
    </div>

    <!-- Espaciador cuando está expandido -->
    <div class="flex-1" [ngClass]="isExpanded ? 'block' : 'hidden'"></div>

    <!-- Botón hamburguesa vertical - cuando está colapsado -->
    <button
      [ngClass]="isExpanded ? 'hidden' : 'flex'"
      (click)="expandSidebar()"
      class="w-full h-20 items-center justify-center bg-white hover:bg-gray-100 border-t border-gray-200 transition-colors flex-shrink-0">
      <svg class="w-6 h-6 text-gray-800" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
      </svg>
    </button>

    <!-- Botón de contacto vertical - al fondo -->
    <a routerLink="/contact"
       [ngClass]="isExpanded ? 'hidden' : 'flex'"
       (click)="onLinkClick()"
       class="w-full h-20 items-center justify-center bg-gradient-to-r from-blue-900 to-blue-800 hover:from-blue-800 hover:to-blue-700 text-white transition-colors flex-shrink-0">
      <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/>
      </svg>
    </a>
  </div>
</aside>

<!-- Botón hamburguesa flotante (solo mobile) -->
<button
  (click)="toggleMobileSidebar()"
  class="lg:hidden fixed top-4 left-4 z-[1000] p-3 bg-white rounded-lg shadow-lg hover:shadow-xl transition-all border border-gray-200">
  <svg class="w-6 h-6 text-gray-800" fill="none" stroke="currentColor" viewBox="0 0 24 24">
    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
  </svg>
</button>
